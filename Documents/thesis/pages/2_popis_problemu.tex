\chapter{Popis problému a specifikace cíle}
\section{Popis problematiky}
Softwarové systémy jsou určeny k tomu, aby méně či více úspěšně poskytovaly uživateli nástroj, který mu pomůže s řešením problémů. Systém tedy musí komunikovat s uživatelem. K tomuto účelu se využívá uživatelské rozhraní. Vývoj uživatelského rozhraní zabere přibližně 50 \% času \cite{cernyTSUID}, který je určen na vývoj konkrétního systému. Tento údaj se samozřejmě může lišit v závislosti na účelu a velikosti systému. Při tvorbě uživatelského rozhraní se obvykle zaměřujeme na použitelnost. V tomto případě provádíme testy použitelnosti na cílové skupině, na jejichž základě jsme schopni určit, zdali je návrh použitelný či nikoliv. Důvodem tohoto testování je fakt, že obvykle systém vytváříme pro uživatele a ne obráceně. Z výše uvedených skutečností vyplývá, že je potřeba uživatelské rozhraní důkladně testovat, aby bylo pro cílovou skupinu správně použitelné. Na uživatelské rozhraní lze nahlížet z aspektu, jakým ho bude používat koncový uživatel. Rozhraní musí mít prvky umožňující vložit data, také musí vložená data validovat a jistě musí zobrazovat uživateli data v závislosti na jeho roli. Na uživatelské rozhraní se proto můžeme dívat z hlediska reprezentace dat, bezpečnosti, uspořádání komponent a mapování dat na entitu, kterou reprezentují \cite{cernyTEA}. 

Bohužel, když se hovoří o uživatelském rozhraní, často se zapomíná na to, že toto rozhraní se musí nejen vytvořit, ale také udržovat. Softwarový systém tráví většinu svého života v udržovacím režimu, kterému se říká support nebo li podpora. V této fázi přichází na systém mnoho požadavků, které musí být proveditelné a to za přijatelné náklady. Nedílnou součástí jsou změny, které se týkají databázového modelu a obvykle tyto změny musí reflektovat UI. Podívejme se proto na systém z pohledu vývojáře. Systém pro něj musí být snadno udržovatelný, změny lehce proveditelné a bez větších dopadů na systém. V tomto případě by bylo vhodné reflektovat tyto změny v UI. Nedílnou součástí každého uživatelského rozhraní jsou validace, které by měli reflektovat například změny v databázovém modelu ale i změny v business modelu.

\subsection{Typy uživatelských rozhraní}
Jak již bylo zmíněno, uživatelské rozhraní se testuje na základě typu aplikace a jejím použití. Je také důležité vzít v potaz zařízení, na kterém je aplikace provozována. Může se jednat o desktopovou, mobilní či serverou aplikaci. V každém z výše uvedených případů bude návrh uživatelského rozhraní podmíněn jinými faktory, které jsou specifické pro dané zařízení. Těmito faktory jsou způsoby, jakými se aplikace ovládá, prostředí, v kterém se uživatel právě nachází a účel, ke kterému je aplikace určena. Například aplikace na mobilních zařízení nemusí podporovat klávesové zkratky, ale mohla by podporovat gesta. Obdobně aplikace použitá na desktopu může počítat s použití myše, touchpadu, klávesnice - jak standardní tak dotykové, či jiného externího zařízení. Je tedy zřejmé, že uživatelské rozhraní je kromě jeho účelu podmíněno i zařízením, na kterém je používáno.

Základními ovládacími a vizuálními prvky téměř každé aplikace jsou tlačítka, vstupní pole, přepínače, tabulky, menu a statické texty. Vstupní pole můžeme shrnout do jedné kategorie, která se nazývá formulář. Formulář obvykle osahuje 1 až N prvků, s tím, že zde má každý prvek svojí funkčnost a účel. Účelem je poskytnout uživateli možnost vložení dat, či možnost volby chování aplikace. Funkčností je tato data správně interpretovat a na jejich základě provést specifické akce. Ve formuláři také mohou být pouze statická data, která slouží k reprezentaci aktuálního stavu, který slouží uživateli k tomu, aby pochopil aktuální stav ve kterém se aplikace či jeho část nachází a na základě tohoto stavu mohl rozhodnout o další akci, pokud je toto rozhodnutí vyžadování a umožněno.
\subsection{Získávání a vkládání dat}
Aplikace používá vizuální prvky k tomu, aby uživateli reprezentovala data či umožnila uživateli tato data vytvořit. Moderním způsobem je dnes využívat k získávání a vkládání dat webové služby. Výhodou je, že se klient může připojit na různé zdroje a z těchto dat si vytvářet tzv.: mashup. Obvyklé použití je takové, že server získá data z více zdrojů a ty pak interpretuje klientům. Klient tedy nezná originální původ informací. Jedním z dalších způsobů je vlastní databáze na klientovi. V tomto případě již ale nemůžeme hovořit o klientovi, neboť se jedná o soběstačnou aplikaci, v případě, že nezískává data z jiných dalších zdrojů. Samozřejmě existují i kombinace těchto možností. Volba závisí vždy na konkrétním zadání a účelu, pro který je aplikace navržena.

V případě reprezentace je potřeba data získat. Jak již bylo zmíněno výše, existuje mnoho způsobů, kde a jak data získat. Zaměříme se nyní na získání dat z jiných zdrojů. Pokud žádáme o data jiný zdroj, tak jsme obvykle schopni zjistit formát a způsob, jakým o data požádat, ale strukturu dat předem neznáme. Nejčastěji jsou data přenášena jako JSON \cite{javaEE} nebo XML. To nám umožní data serializovat do objektu, pokud známe definici objektu. Definice objektu lze získat obvykle v dokumentaci k dané službě, takže námi navržená aplikace očekává data specifického typu. Uvažujme o následujícím příkladu, ve kterém jsme vytvořili klienta, jenž zobrazuje jména a příjmení uživatelů v systému. Po určité době je však potřeba kromě jména zobrazovat i jejich uživatelské jméno. Do dat, která získáváme od služby, tedy přibude sloupeček s uživatelským jménem. Nyní musíme naší klientskou aplikaci upravit tak, aby byla schopná zobrazovat i tyto informace. Provedli jsme tady poměrně triviální úpravu. Přidali jsme pole k zobrazení uživatelského jména, upravili jsme objekt, do kterého se data serializovala, a v další verzi vydání aplikace se tato změna projeví. Změna tedy není klientům dostupná ihned. Po určité době se rozhodlo, že se kolonka uživatelského jména odstraní. Tento případ je tedy mnohem horší. Neboť po serializace bude v poli reprezentující uživatelské jméno hodnota null. Pokud jsme jméno pouze vypisovali je vše v pořádku, avšak pokud jsme nad ním prováděli nějaké operace, můžeme obdržet výjimku a aplikace nemusí být schopna pokračovat v běhu.

V případě vkládání dat do jiného zdroje platí chování a nastavení z odstavce uvedeného výše. Je tedy potřeba znát zdroj, na který lze data odeslat, formát dat, metodu a popřípadě další dodatečná nastavení služby. Budeme uvažovat stejný příklad, jako byl již rozebrán v předchozím odstavci s tím rozdílem, že nyní data vkládáme. Na server tedy nejprve odesíláme pouze jméno a příjmení. Předpokládejme, že tyto dvě hodny jsou serverem vyžadovány. Je tedy potřeba mít validaci, která zkontroluje, zdali jsou data před odesláním v pořádku, či musíme správně interpretovat odpověď serveru, který sdělí, že data nejsou validní, pokud touto validací disponuje. Při přidání nového pole, u kterého server vyžaduje jeho vyplnění, nyní klient přestane správně fungovat a server by měl data odmítat. Musíme tedy udělat změnu na klientovi. Přidat vstupní pole, přidat proměnou, která bude zastupovat uživatelské jméno a novou verzi nasadit a distribuovat. Po určité době, stejně jako v prvním případě se definice dat změní a uživatelské jméno již nebude klientům zasíláno a nebude ani možnost ho vyplňovat. Klient se opět stane nevalidním, neboť při serializaci na straně serveru dojde k chybě, protože klient posílá proměnou, kterou již nyní server neznám. Formulář se tedy opět stane nefunkčním.
\subsection{Aspektový přístup}
Z dosavadního testu je zřejmé, že aplikace obsahuje vizuální prvky, na které lze nahlížet z několika aspektů. Jedním z důležitých aspektů je bezpečnost. Funkce, které může konkrétní uživatel využívat, se přidělují na základě uživatelských rolí. V této souvislosti je mnoho přístupů jak role přidělovat a spravovat, ale všechny způsoby mají jedno společné. Ověřují, zdali má uživatel právo akci provádět. Souvislost mezi rolí a uživatelským rozhraním je patrná. Mějme uživatele v role administrátora. Tato role bude mít práva na úpravu uživatelských dat jiných uživatelů. Dále mějme roli hosta, která si může data uživatelů pouze zobrazit. Při detailnějším prozkoumání zjistíme, že existuje množina zobrazovaných dat, která je pro obě role stejná, nicméně pro roli hosta by měla být všechna tato data needitovatelná. Dosáhnout této možnosti lze několika způsoby a záleží na platformě a volbě řešení. Nicméně v Java SE aplikaci, která využívá SWING to znamená, že buď musí být data zobrazována jakou label nebo musí být komponenty vypnuty. V obou případech musí vývojář na základě uživatelské role zvolit jeden z přístupů a nastavovat data na konkrétní komponentě. Pokud zvolí způsob labelů, tak vytváří duplicitní formulář pouze s jiným aktivním prvkem. Pokud jsou data získávána ze serveru, tak na něm jsou již bezpečnostní politiky implementované a postačilo by jejich výsledky propagovat do klientské aplikace. Server by tedy sám rozhodl, jaká data zobrazit.
\section{Existující řešení}
V současné době existuje několik řešení, které se snaží zjednodušit tvorbu uživatelského rozhraní. Níže zmíněné technologie jsou frameworky \cite{framework}, které nabízí předpřipravené komponenty či usnadňují způsob, jakým lze data přenášet spravovat či reprezentovat s cílem zjednodušit tvorbu uživatelských rozhraní Jsou jimi například JSF, JSP, Swing, Struts, Vaadin, RichFaces, PrimeFaces. Tyto řešení se nezaměřují na dynamické generování uživatelského rozhraní, ale pouze poskytují komponenty či nástroje, který vývoj urychlí. Zjednodušení je například v tom, že vývojář nemusí například definovat tabulku pomocí HTML tagu table, ale lze využít předpřipravenou komponentu. Poskytovaná řešení obvykle využívají návrhových vzorů. Například ve Swingu je využívají komponenty vzoru MVC \cite{fowler}, stejně tak JSF \cite{javaEETutorial}. Žádná z výše uvedených technologií však neumožňuje generovat dynamická uživatelská rozhraní na základě obecných definic, či tyto definice vytvářet.
\subsection{SwinXml}
Tento framework se zaměřuje pouze na generování uživatelského rozhraní ve Swingu. Základem je specifikace rozhraní pomocí XML, což je velmi velkou výhodou, neboť specifikace v tomto formátu má jasně dané možnosti a je na první pohled zřejmé jak bude daná komponenta fungovat. Knihovna implementuje téměř všechny možnosti, které lze nastavit standardní cestou vývoje Swing aplikace. ActionListenery a dodatečné nastavení si vývojář může specifkovat po vygenerování komponent. Hlavní nevýhodou je, že všechny komponenty, které se generují, je potřeba mít specifikované i ve výsledné aplikaci. Není zde žádné zapouzdření komponent a při detailnější specifikaci se stává XML definice až příliš rozsáhlá.
\subsection{Metawidget}
Projekt Metawidget se zaměřuje na vytváření uživatelského rozhraní na základě inspekce tříd. Použít ji lze z mnoha populárními frameworky jako jsou Spring, Struts, JSF, JSP a další. Generování uživatelského rozhraní probíhá na základě inspekce již existující třídy a konfigurace konkrétní aplikace. Aktuální verze je 4.0 a byla vydána 1. listopadu 2014. Je k dispozici pod licencí LGPL/EPL. Co se týče použitelnosti této knihovny, tak mezi hlavní výhody patří zejména široká škála podporovaných frameworků a hlavně velká škála podporovaných validátorů. Data lze získat i pomocí REST, nicméně nativní a jednoduchá podpora zde chybí. Framework bohužel neumožňuje generování tabulek.
\subsection{AspectFaces}
Jedná se o framework, který umožňuje inspekci na základě tříd. Framework umožňuje použití různých layoutů a inspekčních pravidel. Výsledné vygenerované uživatelské rozhraní se může pro stejné obejkty lišit na základě specifického nastavení. V současné době je stabilní verze 1.4.0 a na verzi 1.5.0 se pracuje a je distribuován pod licencí LGPL v3. Vývojář si může své vlastní nastavení pro generování uživatelského rozhraní pravit. Tato nastavení jsou v XML formátu a lze je tedy snadno modifikovat. Framework podporuje velkou škálu anotací z JPA, Hibernate a uživatel si v případě nutnosti může vytvořit vlastní anotaci, která se promítne do inspekce. Framework je prozatím bohužel jednostranně orientovaný na JSF. Tomu odpovídá i způsob generování dat a způsob, jakým je prováděna složitější inspekce. 
\section{Cíle projektu}
Existující řešení poskytují mnoho různorodých funkcí. Jejich hlavní výhody jsou zkrácení času, který je potřeba k vývoji a úpravě uživatelského rozhraní. Trendem současné doby jsou webové služby, proto se i v této práci budu soustředit na získávání definice dat z webových služeb a jejích interpretaci na klienta stejně tak jako na plnění této reprezentace skutečnými daty. Inspekce tedy bude prováděna na straně serveru, který zná objekty, s kterými pracuje a klient pouze obdrží jejich definici. Tento přístup umožní klientovi pružně a ihned reagovat na změny v datovém formátu, který diktuje server. Dalším pozitivním vlivem, bude to, že server bude klientovi poskytovat i seznam validací, jimiž musí jednotlivá komponenta vyhovět, aby bylo možné data odeslat zpět na server a ten je správně zpracoval. Celý tento proces by měl být pro klienta zapouzdřen, aby aplikace nevyžadovala od klienta více informací než je nutné. Mezi nutnou informaci patří specifikace připojení a formát dat. Například JSON, XML. Použití frameworku by mělo být velmi jednoduché a v případě, že bude chtít klient postavit formulář, tak by mu mělo stačit pouze několik řádků kódu. Dalším důležitým aspektem jsou již existující zdroje na serveru, které by měli po přidání frameworku zůstat stejné. 